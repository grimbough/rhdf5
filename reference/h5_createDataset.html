<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Create HDF5 dataset — h5_createDataset • rhdf5</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Create HDF5 dataset — h5_createDataset"><meta property="og:description" content="R function to create an HDF5 dataset and defining its dimensionality and
compression behaviour."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rhdf5</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">2.41.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../articles/rhdf5.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/practical_tips.html">**rhdf5** Practical Tips</a>
    </li>
    <li>
      <a href="../articles/rhdf5_cloud_reading.html">Reading HDF5 Files In The Cloud</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/grimbough/rhdf5/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Create HDF5 dataset</h1>
    <small class="dont-index">Source: <a href="https://github.com/grimbough/rhdf5/blob/HEAD/R/h5create.R" class="external-link"><code>R/h5create.R</code></a></small>
    <div class="hidden name"><code>h5_createDataset.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>R function to create an HDF5 dataset and defining its dimensionality and
compression behaviour.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">h5createDataset</span><span class="op">(</span>
  <span class="va">file</span>,
  <span class="va">dataset</span>,
  <span class="va">dims</span>,
  maxdims <span class="op">=</span> <span class="va">dims</span>,
  storage.mode <span class="op">=</span> <span class="st">"double"</span>,
  H5type <span class="op">=</span> <span class="cn">NULL</span>,
  size <span class="op">=</span> <span class="cn">NULL</span>,
  encoding <span class="op">=</span> <span class="cn">NULL</span>,
  chunk <span class="op">=</span> <span class="va">dims</span>,
  <span class="va">fillValue</span>,
  level <span class="op">=</span> <span class="fl">6</span>,
  filter <span class="op">=</span> <span class="st">"gzip"</span>,
  shuffle <span class="op">=</span> <span class="cn">TRUE</span>,
  native <span class="op">=</span> <span class="cn">FALSE</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>file</dt>
<dd><p>The filename (character) of the file in which the dataset will be
located. For advanced programmers it is possible to provide an object of
class <a href="H5IdComponent-class.html">H5IdComponent</a> representing a H5 location identifier (file or
group). See <code><a href="H5Fcreate.html">H5Fcreate()</a></code>, <code><a href="H5Fopen.html">H5Fopen()</a></code>, <code><a href="H5Gcreate.html">H5Gcreate()</a></code>, <code><a href="H5Gopen.html">H5Gopen()</a></code> to
create an object of this kind.</p></dd>


<dt>dataset</dt>
<dd><p>Name of the dataset to be created. The name can contain group
names, e.g. 'group/dataset', but the function will fail, if the group does
not yet exist.</p></dd>


<dt>dims</dt>
<dd><p>The dimensions of the array as they will appear in the file.
Note, the dimensions will appear in inverted order when viewing the file
with a C-programm (e.g. HDFView), because the fastest changing dimension in
R is the first one, whereas the fastest changing dimension in C is the last
one.</p></dd>


<dt>maxdims</dt>
<dd><p>The maximum extension of the array. Use <code><a href="H5Sunlimited.html">H5Sunlimited()</a></code>
to indicate an extensible dimension.</p></dd>


<dt>storage.mode</dt>
<dd><p>The storage mode of the data to be written. Can be
obtained by <code>storage.mode(mydata)</code>.</p></dd>


<dt>H5type</dt>
<dd><p>Advanced programmers can specify the datatype of the dataset
within the file. See <code>h5const("H5T")</code> for a list of available
datatypes. If <code>H5type</code> is specified the argument <code>storage.mode</code>
is ignored. It is recommended to use <code>storage.mode</code></p></dd>


<dt>size</dt>
<dd><p>For <code>storage.mode='character'</code> the maximum string length to use.
The default value of <code>NULL</code> will result in using variable length strings.
See the details for more information on this option.</p></dd>


<dt>encoding</dt>
<dd><p>The encoding of the string data type. Valid options are
"ASCII" or "UTF-8".</p></dd>


<dt>chunk</dt>
<dd><p>The chunk size used to store the dataset. It is an integer
vector of the same length as <code>dims</code>. This argument is usually set
together with a compression property (argument <code>level</code>).</p></dd>


<dt>fillValue</dt>
<dd><p>Standard value for filling the dataset. The storage.mode of
value has to be convertible to the dataset type by HDF5.</p></dd>


<dt>level</dt>
<dd><p>The compression level used. An integer value between 0 (no
compression) and 9 (highest and slowest compression).</p></dd>


<dt>filter</dt>
<dd><p>Character defining which compression filter should be applied
to the chunks of the dataset.  See the Details section for more information
on the options that can be provided here.</p></dd>


<dt>shuffle</dt>
<dd><p>Logical defining whether the byte-shuffle algorithm should be
applied to data prior to compression.</p></dd>


<dt>native</dt>
<dd><p>An object of class <code>logical</code>. If TRUE, array-like objects
are treated as stored in HDF5 row-major rather than R column-major
orientation. Using <code>native = TRUE</code> increases HDF5 file portability
between programming languages. A file written with <code>native = TRUE</code>
should also be read with <code>native = TRUE</code></p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Returns (invisibly) <code>TRUE</code> if dataset was created successfully and <code>FALSE</code> otherwise.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Creates a new dataset in an existing HDF5 file. The function will fail if the
file doesn't exist or if there exists already another dataset with the same
name within the specified file.</p>
<p>The <code>size</code> argument is only used when <code>storage.mode = 'character'</code>.  When
storing strings HDF5 can use either a fixed or variable length datatype.
Setting <code>size</code> to a positive integer will use fixed length strings where
<code>size</code> defines the length.  <span class="pkg">rhdf5</span> writes null padded strings by default
and so to avoid data loss the value provided here should be the length of the
longest string.  Setting <code>size = NULL</code> will use variable length strings. The
choice is probably dependent on the nature of the strings you're writing. The
principle difference is that a dataset of variable length strings will not be
compressed by HDF5 but each individual string only uses the space it
requires, whereas in a fixed length dataset each string is of length uses
<code>size</code>, but the whole dataset can be compressed. This explored more in the
examples below.</p>
<p>The <code>filter</code> argument can take several options matching to compression
filters distributed in either with the HDF5 library in <span class="pkg">Rhdf5lib</span> or via
the <span class="pkg">rhdf5filters</span> package.  The plugins available and the corresponding
values for selecting them are shown below:</p>
<dl><dt>zlib: Ubiquitous deflate compression algorithm used in GZIP
or ZIP files.  All three options below achieve the same result.</dt>
<dd><p></p><ul><li><p><code>"GZIP"</code>,</p></li>
<li><p><code>"ZLIB"</code>,</p></li>
<li><p><code>"DEFLATE"</code></p></li>
</ul><p></p></dd>
 <dt>szip:
Compression algorithm maintained by the HDF5 group.</dt>
<dd><p></p><ul><li><p><code>"SZIP"</code></p></li>
</ul><p></p></dd>
 <dt>bzip2</dt>
<dd><p></p><ul><li><p><code>"BZIP2"</code></p></li>
</ul><p></p></dd>

<dt>BLOSC meta compressor: As a meta-compressor BLOSC wraps several
different compression algorithms.  Each of the options below will active a
different compression filter. </dt>
<dd><p></p><ul><li><p><code>"BLOSC_BLOSCLZ"</code></p></li>
<li><p><code>"BLOSC_LZ4"</code></p></li>
<li><p><code>"BLOSC_LZ4HC"</code></p></li>
<li><p><code>"BLOSC_SNAPPY"</code></p></li>
<li><p><code>"BLOSC_ZLIB"</code></p></li>
<li><p><code>"BLOSC_ZSTD"</code></p></li>
</ul><p></p></dd>
 <dt>lzf</dt>
<dd><p></p><ul><li><p><code>"LZF"</code></p></li>
</ul><p></p></dd>
 <dt>Disable: It is possible to write chunks without
any compression applied.</dt>
<dd><p></p><ul><li><p><code>"NONE"</code></p></li>
</ul><p></p></dd>
 
</dl></div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p><code><a href="h5_createFile.html">h5createFile()</a></code>, <code><a href="h5_createGroup.html">h5createGroup()</a></code>, <code><a href="h5_read.html">h5read()</a></code>, <code><a href="h5_write.html">h5write()</a></code></p></div>
    </div>
    <div id="author">
    <h2>Author</h2>
    <p>Bernd Fischer, Mike L. Smith</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="h5_createFile.html">h5createFile</a></span><span class="op">(</span><span class="st">"ex_createDataset.h5"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># create dataset with compression</span></span>
<span class="r-in"><span class="fu">h5createDataset</span><span class="op">(</span><span class="st">"ex_createDataset.h5"</span>, <span class="st">"A"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">8</span><span class="op">)</span>, storage.mode <span class="op">=</span> <span class="st">"integer"</span>, chunk<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">1</span><span class="op">)</span>, level<span class="op">=</span><span class="fl">6</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># create dataset without compression</span></span>
<span class="r-in"><span class="fu">h5createDataset</span><span class="op">(</span><span class="st">"ex_createDataset.h5"</span>, <span class="st">"B"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">8</span><span class="op">)</span>, storage.mode <span class="op">=</span> <span class="st">"integer"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">h5createDataset</span><span class="op">(</span><span class="st">"ex_createDataset.h5"</span>, <span class="st">"C"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">8</span><span class="op">)</span>, storage.mode <span class="op">=</span> <span class="st">"double"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># create dataset with bzip2 compression</span></span>
<span class="r-in"><span class="fu">h5createDataset</span><span class="op">(</span><span class="st">"ex_createDataset.h5"</span>, <span class="st">"D"</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">8</span><span class="op">)</span>, storage.mode <span class="op">=</span> <span class="st">"integer"</span>,</span>
<span class="r-in">    chunk<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">5</span>,<span class="fl">1</span><span class="op">)</span>, filter <span class="op">=</span> <span class="st">"BZIP2"</span>, level<span class="op">=</span><span class="fl">6</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># create a dataset of strings &amp; define size based on longest string</span></span>
<span class="r-in"><span class="va">ex_strings</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">'long'</span>, <span class="st">'longer'</span>, <span class="st">'longest'</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">h5createDataset</span><span class="op">(</span><span class="st">"ex_createDataset.h5"</span>, <span class="st">"E"</span>,</span>
<span class="r-in">    storage.mode <span class="op">=</span> <span class="st">"character"</span>, chunk <span class="op">=</span> <span class="fl">3</span>, level <span class="op">=</span> <span class="fl">6</span>,</span>
<span class="r-in">    dims <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">ex_strings</span><span class="op">)</span>, size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="va">ex_strings</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># write data to dataset</span></span>
<span class="r-in"><span class="fu"><a href="h5_write.html">h5write</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">40</span>,nr<span class="op">=</span><span class="fl">5</span>,nc<span class="op">=</span><span class="fl">8</span><span class="op">)</span>, file<span class="op">=</span><span class="st">"ex_createDataset.h5"</span>, name<span class="op">=</span><span class="st">"A"</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># write second column</span></span>
<span class="r-in"><span class="fu"><a href="h5_write.html">h5write</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/matrix.html" class="external-link">matrix</a></span><span class="op">(</span><span class="fl">1</span><span class="op">:</span><span class="fl">5</span>,nr<span class="op">=</span><span class="fl">5</span>,nc<span class="op">=</span><span class="fl">1</span><span class="op">)</span>, file<span class="op">=</span><span class="st">"ex_createDataset.h5"</span>, name<span class="op">=</span><span class="st">"B"</span>, index<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="cn">NULL</span>,<span class="fl">2</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"><span class="co"># write character vector</span></span>
<span class="r-in"><span class="fu"><a href="h5_write.html">h5write</a></span><span class="op">(</span><span class="va">ex_strings</span>, file <span class="op">=</span> <span class="st">"ex_createDataset.h5"</span>, name <span class="op">=</span> <span class="st">"E"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu"><a href="h5_dump.html">h5dump</a></span><span class="op">(</span><span class="st">"ex_createDataset.h5"</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $A</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]    1    6   11   16   21   26   31   36</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]    2    7   12   17   22   27   32   37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]    3    8   13   18   23   28   33   38</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,]    4    9   14   19   24   29   34   39</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,]    5   10   15   20   25   30   35   40</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $B</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]    0    1    0    0    0    0    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]    0    2    0    0    0    0    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]    0    3    0    0    0    0    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,]    0    4    0    0    0    0    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,]    0    5    0    0    0    0    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $C</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]    0    0    0    0    0    0    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]    0    0    0    0    0    0    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]    0    0    0    0    0    0    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,]    0    0    0    0    0    0    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,]    0    0    0    0    0    0    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $D</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1] [,2] [,3] [,4] [,5] [,6] [,7] [,8]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]    0    0    0    0    0    0    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]    0    0    0    0    0    0    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]    0    0    0    0    0    0    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4,]    0    0    0    0    0    0    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5,]    0    0    0    0    0    0    0    0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $E</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "long"    "longer"  "longest"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Investigating fixed vs variable length string datasets</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## create 1000 random strings with length between 50 and 100 characters</span></span>
<span class="r-in"><span class="va">words</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html" class="external-link">ceiling</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/Uniform.html" class="external-link">runif</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">1000</span>, min <span class="op">=</span> <span class="fl">50</span>, max <span class="op">=</span> <span class="fl">100</span><span class="op">)</span><span class="op">)</span> |&gt;</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">vapply</a></span><span class="op">(</span>FUN <span class="op">=</span> \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">{</span></span>
<span class="r-in"> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/sample.html" class="external-link">sample</a></span><span class="op">(</span><span class="va">letters</span>, size <span class="op">=</span> <span class="va">x</span>, replace <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">""</span><span class="op">)</span></span>
<span class="r-in"><span class="op">}</span>,</span>
<span class="r-in">FUN.VALUE <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">character</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## create two HDF5 files</span></span>
<span class="r-in"><span class="va">f1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"><span class="va">f2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempfile</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="h5_createFile.html">h5createFile</a></span><span class="op">(</span><span class="va">f1</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="h5_createFile.html">h5createFile</a></span><span class="op">(</span><span class="va">f2</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## create two string datasets</span></span>
<span class="r-in"><span class="co">## the first is variable length strings, the second fixed at the length of our longest word</span></span>
<span class="r-in"><span class="fu">h5createDataset</span><span class="op">(</span><span class="va">f1</span>, <span class="st">"strings"</span>, dims <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">words</span><span class="op">)</span>, storage.mode <span class="op">=</span> <span class="st">"character"</span>, size <span class="op">=</span> <span class="cn">NULL</span>, chunk <span class="op">=</span> <span class="fl">25</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">h5createDataset</span><span class="op">(</span><span class="va">f2</span>, <span class="st">"strings"</span>, dims <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/length.html" class="external-link">length</a></span><span class="op">(</span><span class="va">words</span><span class="op">)</span>, storage.mode <span class="op">=</span> <span class="st">"character"</span>, size <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Extremes.html" class="external-link">max</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/nchar.html" class="external-link">nchar</a></span><span class="op">(</span><span class="va">words</span><span class="op">)</span><span class="op">)</span>, chunk <span class="op">=</span> <span class="fl">25</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Write the data</span></span>
<span class="r-in"><span class="fu"><a href="h5_write.html">h5write</a></span><span class="op">(</span><span class="va">words</span>, <span class="va">f1</span>, <span class="st">"strings"</span><span class="op">)</span></span>
<span class="r-in"><span class="fu"><a href="h5_write.html">h5write</a></span><span class="op">(</span><span class="va">words</span>, <span class="va">f2</span>, <span class="st">"strings"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">## Check file sizes.</span></span>
<span class="r-in"><span class="co">## In this example the fixed length string dataset is normally much smaller</span></span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/file.info.html" class="external-link">file.size</a></span><span class="op">(</span><span class="va">f1</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 106866</span>
<span class="r-in"><span class="fu"><a href="https://rdrr.io/r/base/file.info.html" class="external-link">file.size</a></span><span class="op">(</span><span class="va">f2</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 58816</span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Bernd Fischer, Mike Smith, Gregoire Pau.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.4.</p>
</div>

      </footer></div>

  


  

  </body></html>

